<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>SK88 OR DIE</title>
<style>
  body,html{margin:0;padding:0;height:100%;background:#000;color:#0f0;font-family:monospace;overflow:hidden}
  footer{position:fixed;bottom:10px;left:0;width:100%;text-align:center;font-size:12px;opacity:0.5;color:#0f0;z-index:1}
</style>
</head>
<body>

<div id="grim-overlay" style="display:none">
<style>
#grim-overlay{position:fixed!important;top:0;left:0;width:100vw!important;height:100vh!important;
  background:#000;z-index:2147483647!important;display:flex!important;flex-direction:column;
  align-items:center;justify-content:flex-start;overflow:hidden;image-rendering:pixelated}
#grim-canvas{background:#000;display:block;margin-top:20px;width:100%;max-width:900px}
#grim-score,#grim-countdown,#grim-high{position:absolute;top:15px;font-size:36px;color:#0f0;text-shadow:0 0 12px;z-index:10}
#grim-score{left:15px}#grim-high{top:60px;left:15px;font-size:28px;opacity:0.8}
#grim-countdown{right:15px;color:#f00;animation:p .7s infinite}
#grim-start{color:#0f0;font-size:48px;text-align:center;text-shadow:0 0 20px #0f0;animation:g 2s infinite alternate;margin-top:10vh}
#tap-btn{position:fixed;bottom:40px;background:#c00;color:#fff;padding:22px 70px;font-size:32px;
  border-radius:16px;box-shadow:0 0 50px #f00;animation:p 1s infinite;touch-action:manipulation;z-index:99}
@keyframes glow{from{text-shadow:0 0 20px #0f0}to{text-shadow:0 0 70px #f00}}
@keyframes p{0%,100%{opacity:1}50%{opacity:0.4}}
</style>

<div id="grim-start">PRESS SPACE<br>OR TAP TO SKATE IN HELL</div>
<div id="grim-score">Score: 0</div>
<div id="grim-high">High Score: 0</div>
<div id="grim-countdown">Doom in: 10</div>
<button id="tap-btn">TAP TO JUMP</button>
<canvas id="grim-canvas" width="900" height="320"></canvas>
</div>

<script>
let unlocked=false;
const play=src=>unlocked&&new Audio(src).play().catch(()=>{});
const SFX={jump:'data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAAZGF0YQAAAAAAAP//',
           die:'data:audio/wav;base64,UklGRhwDAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAAA0Pz/AFX+/w=='};

(() => {
  const overlay=document.getElementById('grim-overlay');
  const canvas=document.getElementById('grim-canvas');
  const ctx=canvas.getContext('2d');
  const startText=document.getElementById('grim-start');
  const scoreEl=document.getElementById('grim-score');
  const highEl=document.getElementById('grim-high');
  const countdownEl=document.getElementById('grim-countdown');
  const btn=document.getElementById('tap-btn');

  let running=false,score=0,highScore=localStorage.sk88high||0,py=130,vel=0,obs=[],f=0,secs=10;
  highEl.textContent='High Score: '+highScore;

  // 10-second countdown
  setInterval(()=>{
    if(overlay.style.display==='flex')return;
    secs=Math.max(0,secs-1);
    countdownEl.textContent=secs?`Doom in: ${secs}`:'SKATE OR DIE!';
    if(secs<=0) overlay.style.display='flex';
  },1000);

  // BULLETPROOF JUMP — works every single time
  const JUMP = e => {
    e?.preventDefault();
    unlocked=true;
    if(!running){
      startText.style.display='none';
      btn.style.display='block';
      running=true;
      requestAnimationFrame(loop);
    }
    // THIS IS THE FIX — use >= 199.9 to catch floating-point errors
    if(py >= 199.9){
      vel = -23;
      play(SFX.jump);
    }
  };

  overlay.onclick = overlay.ontouchstart = JUMP;
  btn.onclick = btn.ontouchstart = JUMP;
  document.onkeydown = e => e.code==='Space' && JUMP();

  ['touchstart','mousemove','keydown'].forEach(ev=>document.addEventListener(ev,()=>{secs=10;countdownEl.textContent='Doom in: 10';},{passive:true}));

  function drawGrimReaper(x,y){
    ctx.fillStyle='#f00';ctx.fillRect(x-15,y+88,100,16);
    ctx.fillStyle='#fff';ctx.fillRect(x-10,y+92,20,6);ctx.fillRect(x+70,y+92,20,6);
    ctx.fillStyle='#000';ctx.fillRect(x,y,80,100);
    ctx.beginPath();ctx.moveTo(x+15,y);ctx.lineTo(x+65,y);ctx.lineTo(x+55,y-30);ctx.lineTo(x+25,y-30);ctx.closePath();ctx.fill();
    ctx.fillStyle='#0f0';ctx.fillRect(x+28,y+12,8,8);ctx.fillRect(x+48,y+12,8,8);
    ctx.strokeStyle='#ccc';ctx.lineWidth=10;ctx.beginPath();ctx.moveTo(x+80,y+40);ctx.lineTo(x+140,y-60);ctx.stroke();
  }

  function loop(){
    ctx.fillStyle='#000';ctx.fillRect(0,0,900,320);
    ctx.fillStyle='#400';ctx.fillRect(0,270,900,50);
    ctx.strokeStyle='#0f0';ctx.lineWidth=14;ctx.beginPath();ctx.moveTo(0,270);ctx.lineTo(900,270);ctx.stroke();

    // GRAVITY + GROUND — this is the OTHER part of the fix
    vel += 0.8;
    py += vel;
    if(py >= 200){
      py = 200;        // ← Force exact ground level
      vel = 0;
    }

    drawGrimReaper(140,py);

    if(f%75===0)obs.push({x:920,y:Math.random()>.5?80:210,bat:Math.random()>.5});
    obs=obs.filter(o=>{o.x-=8;
      if(o.bat){
        ctx.fillStyle='#ff0';
        ctx.beginPath();ctx.moveTo(o.x,o.y);ctx.lineTo(o.x+60,o.y+50);ctx.lineTo(o.x,o.y+100);ctx.lineTo(o.x-40,o.y+50);ctx.closePath();ctx.fill();
      }else{
        ctx.fillStyle='#888';ctx.fillRect(o.x,200,80,100);
        ctx.fillStyle='#f00';ctx.font='bold 40px monospace';ctx.fillText('RIP',o.x+8,255);
      }
      if(o.x<260&&o.x>100&&((o.bat&&py<160)||(!o.bat&&py>160))){
        play(SFX.die);
        if(score>highScore){highScore=score;localStorage.sk88high=highScore;highEl.textContent='High Score: '+highScore+' (NEW!)';}
        running=false;startText.style.display='block';btn.style.display='none';
        obs=[];f=0;py=130;vel=0;score=0;scoreEl.textContent='Score: 0';
      }
      return o.x>-150;
    });

    score++;scoreEl.textContent='Score: '+~~(score/10);
    f++;if(running)requestAnimationFrame(loop);
  }
})();
</script>

<footer>© 2025 SK8ORDIE.COM — SKATE OR DIE™ is forever</footer>
</body>
</html>
